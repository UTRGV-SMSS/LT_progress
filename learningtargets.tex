\usepackage{tcolorbox}
\usepackage{xargs}
\usepackage{xparse}
\usepackage{ifthen}
\usepackage{totcount}

\newcounter{noncorelts}
\newcounter{corelts}
\newcounter{totallts}
\newcounter{gradeAp}
\newcounter{gradeA}
\newcounter{gradeArowI}
\newcounter{gradeArowII}
\newcounter{gradeB}
\newcounter{gradeC}
\newcounter{gradeCrowI}
\newcounter{gradeCrowII}
\newcounter{gradeCrowIII}


\newcounter{leftoverI}
\newcounter{leftoverII}
\newcounter{leftoverIII}
\newcounter{leftoverIV}
\newcounter{leftoverV}
\newcounter{leftoverVI}

%%%%%%%%%%%%%%New Commands%%%%%%%%%%%%%%%%%%%%%%%%%%%


% check and x-mark
\usepackage{pifont}% http://ctan.org/pkg/pifont


\newcommand{\defaultcriteria}{%
    \item All calculus work is done correctly. Sufficient work shown. Use exact answers, not decimal approximations.
    \item Uses calculus to arrive at the answer, not graphical or numerical estimates or guesses.
     \item One or two small arithmetic mistakes may be accepted if it does not significantly alter the problem's intent.
}

\newcommandx{\defineLT}[5][2={},5=\defaultcriteria]{%

\newbool{#1ws}
\newbool{#1ex}
\newbool{#1corelt}

\ifthenelse{\equal{#2}{1}}{%
\expandafter\newcommand\csname#1marker\endcsname{*}
\booltrue{#1corelt}
}{%
\expandafter\newcommand\csname#1marker\endcsname{\relax}
\boolfalse{#1corelt}
}

\expandafter\newcommand\csname#1\endcsname{%
% \if #2 foo \else bar \fi
\begin{tabular}{@{}m{0.90\textwidth}m{0.02\textwidth}m{0.02\textwidth}@{}}
\textbf{\sffamily#3{\large\csname#1marker\endcsname}}: #4  & 
\ifbool{#1ws}{\cxi\,}{\cxI\,} & 
\ifbool{#1ex}{\bxi\,}{\bxI\,}
\end{tabular}
\\
}

\expandafter\newcommand\csname#1set\endcsname[2]{%
\ifthenelse{\equal{##1}{1}}{\booltrue{#1ws}}{\boolfalse{#1ws}}
\ifthenelse{\equal{##2}{1}}{\booltrue{#1ex}}{\boolfalse{#1ex}}
\ifbool{#1ex}{\ifbool{#1ws}{%
    \stepcounter{totallts}
    \ifbool{#1corelt}{\stepcounter{corelts}}{\relax}
}{\relax}}{\relax}
}

\expandafter\newcommand\csname#1full\endcsname{%
\ifbool{#1ex}{\ifbool{#1ws}{\bxi}{\bxI}}{\bxI}
}

}





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\defineLT{LI}[1]{L1}{I can evaluate a limit graphically or numerically including one-sided and infinite limits.}[
    \item All calculus work is done correctly. \item Use exact answers, not decimal approximations.
]

\defineLT{LII}[1]{L2}{I can evaluate a limit analytically (using algebra), including one-sided and infinite limits.}

\defineLT{LIII}{L3}{I can recognize points at which a function is (and is not) continuous and can use continuity to evaluate limits.}

\defineLT{LIV}{L4}{I can describe the behavior of a function on an interval using the Intermediate Value Theorem.}

\defineLT{LV}{L5}{I can identify limits in indeterminate form and apply L'Hopital's rule correctly. }

\defineLT{DMI}{DM1}{I can understand the limit definition of the derivative and calculate the derivative at a point.}


\defineLT{DMII}[1]{DM2}{I can calculate and interpret instantaneous rates of
  change at a point using graphs and tables, and I can understand the difference
  between the instantaneous rate of change and the average rate of change.}

\defineLT{DMIII}{DM3}{I can interpret the average and instantaneous rate of
change using secant and tangent lines.}

\defineLT{DMIV}[1]{DM4}{I can sketch the derivative function from the graph of a
given function (specifically $f'$ from $f$).}


\defineLT{DMV}[1]{DM5}{I can find the tangent line to a function at a given
point.}


\defineLT{DMVI}{DM6}{I can recognize points at which a function is (and is not)
  differentiable, and can use the definition or interpretation of the derivative
to support my thinking.}


\defineLT{DMVII}{DM7}{%
I can use tangent lines to approximate function values, when appropriate.
}

\defineLT{DSI}[1]{DS1}{%
I can compute derivatives correctly using the constant, constant multiple, the
power rules, and sum and difference rules of power functions.
}

\defineLT{DSII}[1]{DS2}{%
I can use the Product and Quotient Rules to compute derivatives of simple algebraic, trigonometric, exponential, and logarithmic functions in combination.
}


\defineLT{DSIII}[1]{DS3}{%
I can use the Chain Rule to compute derivatives of simple algebraic, trigonometric,exponential, and logarithmic functions in combination.
}


\defineLT{DSIV}{DS4}{%
I can use a combination of the Product, Quotient, and Chain Rules to compute derivatives of simple algebraic, trigonometric, exponential, and logarithmic functions in combination.% (Sections 3.5, 3.6, 3.9)
}


\defineLT{DSV}{DS5}{%
I can compute derivatives correctly using implicit differentiation.
}

\defineLT{DSVI}{DS6}{%
I can compute derivatives correctly using logarithmic differentiation.
}

\defineLT{DAI}{DA1}{I can correctly interpret the meaning of a derivative in
context (e.g. velocity, acceleration).}


\defineLT{DAII}[1]{DA2}{I can use calculus to find local and absolute extrema of functions.}


\defineLT{DAIII}{DA3}{I can interpret the meaning of the Mean Value Theorem.}


\defineLT{DAIV}[1]{DA4}{I can explain the relationship between a function and its
  first and second derivatives (concavity, increasing/decreasing, points of
inflection).}


\defineLT{DAV}{DA5}{%
I can solve related rates problems.
}

\defineLT{DAVI}{DA6}{%
I can solve optimization problems.
}

\defineLT{FTCI}[1]{FTC1}{%
I can compute anti-derivatives correctly using the constant, constant multiple, sum and difference rules of basic power functions, trigonometric, and exponential functions.
}

\defineLT{FTCII}[1]{FTC2}{%
I can use antidifferentiation to solve initial-value problems.
}

\defineLT{FTCIII}{FTC3}{%
I can evaluate definite integrals exactly by using the properties of definite integrals, graphs and geometry.
}

\defineLT{FTCIV}{FTC4}{%
I can estimate the values of definite integrals numerically using the left-hand sum or the right-hand sum.
}

\defineLT{FTCV}[1]{FTC5}{%
I can evaluate definite integrals exactly by using the Fundamental Theorem of Calculus (FTC) part 2 with an antiderivative.
}

\defineLT{FTCVI}{FTC6}{%
I can interpret the physical meaning of a definite integral in terms of net area, net change, displacement, or distance, and state its units.
}

\defineLT{FTCVII}{FTC7}{%
I can explain and work with the FTC, part 1 to evaluate derivatives of integrals, including using functions defined by integrals.
}

\defineLT{FTCVIII}{FTC8}{%
I can evaluate integrals using the Substitution Rule using definite and indefinite integrals.
}